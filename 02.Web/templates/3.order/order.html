{% extends "layout.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/3.order/order.css') }}">

<div class="container mt-3">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-primary alert-dismissible fade show auto-dismiss shadow-sm" role="alert">
            <i class="bi bi-info-circle me-2"></i>
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
</div>

<div class="product-wrapper">
    <div class="page-header">
        <h2>ğŸ“‹ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
        <a href="#" class="btn-add">+ ìˆ˜ê¸° ì£¼ë¬¸ ë“±ë¡</a>
    </div>

    <section class="search-section">
        <form action="{{ url_for('order.list_order') }}" method="GET" class="search-form">
            <div class="search-group">
                <label>ì£¼ë¬¸ ë²ˆí˜¸</label>
                <input type="text" name="order_id" class="search-input" value="{{ request.args.get('order_id', '') }}" placeholder="ì£¼ë¬¸ë²ˆí˜¸ ì…ë ¥...">
            </div>

            <div class="search-group">
                <label>ê³ ê°ëª… ë˜ëŠ” ID</label>
                <input type="text" name="names" class="search-input" value="{{ request.args.get('names', '') }}" placeholder="ê³ ê° ì •ë³´ ì…ë ¥...">
            </div>

            <div class="search-group">
                <label>ì£¼ë¬¸ ìƒíƒœ</label>
                <select name="status" class="search-select">
                    <option value="">-- ìƒíƒœ ì „ì²´ --</option>
                    {% for s in status_list %}
                        <option value="{{ s }}" {% if request.args.get('status') == s %}selected{% endif %}>
                            {{ s }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" class="btn-search">ê²€ìƒ‰</button>
        </form>
    </section>

    <div class="product-table-container">
        <table class="product-table">
            <thead>
                <tr>
                    <th>ì£¼ë¬¸ë²ˆí˜¸</th>
                    <th>ê³ ê° ID</th>
                    <th>ì£¼ë¬¸ ì¼ì</th>
                    <th>ìƒíƒœ</th>
                    <th>ê´€ë¦¬</th>
                </tr>
            </thead>
            <tbody>
                {% for p in products %}
                <tr>
                    <td><code>#{{ p.ORDER_ID }}</code></td>
                    <td><strong>{{ p.CUSTOMER_ID }}</strong></td>
                    <td>{{ p.DATE.strftime('%Y-%m-%d %H:%M') if p.DATE else '-' }}</td>
                    <td>
                        <span class="status-badge {% if p.STATUS == 'SHIPPED' %}status-active{% elif p.STATUS == 'CANCELLED' %}status-discontinued{% else %}status-pending{% endif %}">
                            {{ p.STATUS }}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a href="#" class="btn-edit">ìƒì„¸ë³´ê¸°</a>
                            <a href="#" class="btn-delete">ì·¨ì†Œ</a>
                        </div>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="no-data">ì¼ì¹˜í•˜ëŠ” ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}